
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Flavio Castelli</title>
  <meta name="author" content="Flavio Castelli">

  
  <meta name="description" content="Some weeks have passed since the announcement of kaveau. I&#8217;m really proud and
happy about this project because I received a lot of positive &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://flavio.castelli.name/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Flavio Castelli" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- openid delegation -->
<link rel="openid.server" href="http://www.myopenid.com/server" />
<link rel="openid.delegate" href="http://flavio.castelli.myopenid.com/" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3214988-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Flavio Castelli</a></h1>
  
    <h2>Debugging my life.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:flavio.castelli.name" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
  <li><a href="/cv">CV</a></li>
  <li><a href="/contacts">Contacts</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/09/14/kaveau-updates/">Kaveau Updates</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-14T23:38:54+02:00" pubdate data-updated="true">Sep 14<span>th</span>, 2009</time>
        
         | <a href="/2009/09/14/kaveau-updates/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Some weeks have passed since the announcement of kaveau. I&#8217;m really proud and
happy about this project because I received a lot of positive feedback
messages and it has been chosen as one of the best Hackweek&#8217;s projects.</p>

<p>In the meantime I kept working on kaveau, so let me show you what has changed:</p>

<ul>
<li><a href="http://rdiff-backup.nongnu.org/">rdiff-backup</a> has been replaced by <a href="http://www.samba.org/rsync/">rsync</a>.</li>
<li>the setup wizard has been improved according to the feedback messages I received.</li>
<li>old backups are now automatically removed.</li>
<li>the code has been refactored a lot.</li>
</ul>


<h3>The switch to rsync</h3>

<p>Previously kaveau used rdiff-backup as backup back-end. rdiff-backup is a
great program but unfortunately it relies on the outdated
<a href="http://librsync.sourceforge.net/">librsync</a> library. The latest release of
librsync is dated 2004. It has a couple of serious bugs still open and, while
rsync has reached version three, this library is still stuck at version one.</p>

<p>These are the reasons of the switch from rdiff-backup to rsync. This choice
breaks the compatibility with the previous backups but it introduces a lot of
advantages. One of the most important improvements brought by the adoption of
rsync is an easier restore procedure: now <strong>all</strong> the backups can be accessed
using a standard file manager, while previously rdiff-backup was needed to
access the old backups.</p>

<h4>Backup directory structure</h4>

<p>On the backup device everything is saved under the
<em>kaveau</em>/<em>hostname</em>/<em>username</em> path.</p>

<p>The directory will have a similar structure:</p>

<pre><code>drwxr-xr-x 3 flavio users 4096 2009-09-12 18:50 2009-09-12T18:50:19
drwxr-xr-x 3 flavio users 4096 2009-09-14 23:07 2009-09-14T23:07:46
drwxr-xr-x 3 flavio users 4096 2009-09-14 23:30 2009-09-14T23:30:36
lrwxrwxrwx 1 flavio users   19 2009-09-14 23:30 current -&gt; 2009-09-14T23:30:36
</code></pre>

<p>As you can see there&#8217;s one directory per backup, plus a symlink called
<em>current</em> pointing to the latest backup.</p>

<h3>Old backup deletion</h3>

<p>Nowadays big external storage devices are pretty cheap, but it&#8217;s always good
to save some disk space. Now kaveau keeps:</p>

<ul>
<li>hourly backups for the past 24 hours.</li>
<li>daily backups for the past month.</li>
<li>weekly backups until the external disk is full.
Thanks to hard links&#8217; magic, old backups can be deleted without causing
damages to the other ones.</li>
</ul>


<h3>Plans for the future</h3>

<p>Before starting to work on the restore user interface I will spend some time
figuring out how to add support for network devices.</p>

<p>A lot of users requested this feature, hence I want to make them happy :) .</p>

<p>I&#8217;m planning to use <a href="http://avahi.org/">avahi</a> to discover network shares
(nfs, samba) or network machines running ssh and use them as backup devices.
Honestly, I want to achieve something similar to
<a href="http://www.apple.com/timecapsule/">Apple&#8217;s time capsule</a>.</p>

<p>As usual, feedback messages are really appreciated.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/09/04/using-qjson-under-windows/">Using QJson Under Windows</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-09-04T13:44:42+02:00" pubdate data-updated="true">Sep 4<span>th</span>, 2009</time>
        
         | <a href="/2009/09/04/using-qjson-under-windows/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Recently lots of people asked me how to build QJson under Windows. Most of
them reported build/link errors, so I decided to try personally.</p>

<p>The good news is that QJson can be successfully built under Window, I can show
you proof ;)</p>

<p><img src="/images/qjson/qjson_windows_1.png">
<img src="/images/qjson/qjson_windows_2.png"></p>

<p>I have written the build instructions on QJson website: just take a look
<a href="http://qjson.sourceforge.net/download.html#windows">here</a>.</p>

<p>One last note: if you have problems with QJson please subscribe to the
<a href="https://lists.sourceforge.net/lists/listinfo/qjson-%0Adevel">developer mailing list</a> and post a message.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/07/28/kaveau-easy-integrated-backup-solution-kde/">Kaveau: Easy and Integrated Backups Solution for KDE</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-28T09:47:05+02:00" pubdate data-updated="true">Jul 28<span>th</span>, 2009</time>
        
         | <a href="/2009/07/28/kaveau-easy-integrated-backup-solution-kde/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last week I had the possibility to work on anything I wanted,
Novell&#8217;s hackweek is so cool :)</p>

<p>I decided to dedicate myself to an idea that has been obsessing me since a
long time. Last December my brand new hard disk suddenly died, making
impossible to recover anything. Fortunately I had just synchronized the most
important documents between my workstation and my laptop, so I didn&#8217;t lose
anything important. This incident make me realize that I should perform
backups regularly and I immediately started looking for a good solution.</p>

<p>Personally I think that doing backups is pretty boring so I wanted something
damned easy to setup and use. Something that once configured runs in the
background and does the dirty job without bothering you. Let&#8217;s face the truth:
I wanted Apple&#8217;s Time Machine for KDE.</p>

<p>After some searches I realized that nothing was fitting my requirements and I
decided to create something new: <em>kaveau</em>.</p>

<h3>What is kaveau?</h3>

<p>Kaveau is a backup program that makes backup easy for the average user.</p>

<p>As you will see while coding/planning kaveau I made some assumptions and so
only few things are configurable. I really think that sometimes <a href="http://en.wikipedia.org/wiki/Minimalism"><em>&#8220;less is
more&#8221;</em></a>.</p>

<h3>What does kaveau?</h3>

<p>Current features:</p>

<ul>
<li>it performs backups to an external storage device: I don&#8217;t think it will ever store backup data on a remote host. If you want to do that just use some good project like <a href="http://backuppc.sourceforge.net/">Backup pc</a>.</li>
<li>it backs up the complete home directory of the user: storage is cheap and average users (like me) keep everything inside their home directory ( but it&#8217;s possible to exclude some directories from the backup).</li>
<li>it performs incremental backups.</li>
<li>the backup data are neither compressed nor stored in fancy formats: in this way you can plug your external disk into another machine and access your data without additional work.</li>
<li>backups are performed automatically every hour (of course only if your external disk is plugged).</li>
<li>notification messages are shown if your backup is older that a week.
More enhancements are coming&#8230;</li>
</ul>


<h3>What technologies does it use?</h3>

<p>Backups are performed using <a href="http://rdiff-backup.nongnu.org/">rdiff-backup</a>
because it&#8217;s damned easy to use, well tested (it&#8217;s used also in production
environments) and packaged by all distributions.</p>

<p>The awesome <a href="http://solid.kde.org/">solid</a> library is used for interacting
with the external disks is super easy.</p>

<h3>Status of kaveau</h3>

<p>I have been working on kaveau just for five days, so <strong>there&#8217;s still a lot of
work to do</strong>.</p>

<p>A screenshot tour will give you the right idea of its status.</p>

<h4>First run - external storage device attached</h4>

<p><img src="/images/kaveau/sf1.png"></p>

<h4>Backup wizard - page 1</h4>

<p><img src="/images/kaveau/sf3.png"></p>

<h4>Backup wizard - page 2</h4>

<p><img src="/images/kaveau/sf4.png"></p>

<h4>Backup wizard - final page</h4>

<p><img src="/images/kaveau/sf5.png"></p>

<h4>Backup operation in progress</h4>

<p><img src="/images/kaveau/sf6.png"></p>

<h4>Backup completed</h4>

<p><img src="/images/kaveau/sf7.png"></p>

<p>Right now the code is available on
<a href="http://github.com/flavio/kaveau/tree/master">this</a> git repository but I don&#8217;t
recommend you to try it (unless you want to find and fix bugs ;) ).</p>

<p>I would really appreciate:</p>

<ul>
<li>feedback about the user interface (right now it looks too much like Time Machine).</li>
<li>icons: it would be great to have a desktop icon and some system tray icons (contact me for more details).</li>
<li>new code, bug fixes, code reviews, hints,&#8230;</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/07/23/qjson_0-6-0_release/">New QJson Release</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-07-23T11:51:30+02:00" pubdate data-updated="true">Jul 23<span>rd</span>, 2009</time>
        
         | <a href="/2009/07/23/qjson_0-6-0_release/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Gran Canaria Desktop Summit has been great and really productive. I had the
pleasure to meet people interested in QJson, chat with them but also hack with
them.</p>

<p>In fact we hacked a lot, doing lots of changes to QJson:</p>

<ul>
<li>the API has been cleaned, now it can be considered stable</li>
<li>unicode support has been completely rewritten</li>
<li>it&#8217;s now possible to convert QVariant objects into JSON ones</li>
</ul>


<p>So it&#8217;s with a great pleasure that I announce the release of QJson 0.6.0.</p>

<p>Beware, since the API has been changed your application will probably break.
I&#8217;m really sorry about that, but I guarantee it won&#8217;t happen in the future (as
I said both API and ABI interfaces can now be considered stable).</p>

<p><a href="http://qjson.sourceforge.net">QJson web site</a> has been updated, reflecting
all the changes made to the library. openSUSE packages has been moved from my
home repo to <a href="http://download.opensuse.org/repositories/KDE:/Qt/">KDE:Qt</a> one.</p>

<p>One last note, if you have problems with QJson please contact me using the
qjson-devel mailing list. You can subscribe
<a href="https://sourceforge.net/mailarchive/forum.php?forum_name=qjson-devel">here</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/06/30/qjson_desktop_summi/">QJson at Gran Canaria Desktop Summit</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-06-30T19:46:38+02:00" pubdate data-updated="true">Jun 30<span>th</span>, 2009</time>
        
         | <a href="/2009/06/30/qjson_desktop_summi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Now that I have booked both the flights and the hotel it&#8217;s official: I&#8217;ll
attend the <a href="http://www.grancanariadesktopsummit.org/">Gran Canaria Desktop Summit</a>.</p>

<p>On Thursday 9th July I&#8217;ll give a BoF about
<a href="http://qjson.sourceforge.net">QJson</a>.</p>

<p>During the talk I will show:</p>

<ul>
<li>the advantages brought by QJson.</li>
<li>the usage of QJson.</li>
<li>some real programs using QJson.</li>
</ul>


<p>See you soon!</p>

<p><img src="/images/gran_canaria_desktop_summit/badge.png"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/07/rockmarble-rock-in-your-town/">Rockmarble: See Who Is Going to Rock in Your Town</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-07T17:40:45+02:00" pubdate data-updated="true">Apr 7<span>th</span>, 2009</time>
        
         | <a href="/2009/04/07/rockmarble-rock-in-your-town/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last weekend I hacked a bit on rockmarble and I added a new
feature: retrieve all the events happening in a certain city.</p>

<p>As usual data is provided by last.fm, which should return also the events
<em>&#8220;near&#8221; </em>the specified city (don&#8217;t ask me to define a value for <em>near</em> :) ).</p>

<p>I have created new openSUSE packages, this time everything should work fine.
Just make sure to remove all <a href="http://qjson.sourceforge.net/">qjson</a> packages
before installing this release (in fact all the previous problems were due to
packaging errors of qjson, now I have created new packages called libqjson0).</p>

<p>Packages are available for openSUSE 11.0, 11.1 and Factory (both for i586 and
x86_64 architectures).</p>

<p>One last news: rockmarble has also a new
<a href="http://rockmarble.sourceforge.net">site</a>, something slightly better than
github wiki ;)</p>

<p><a href="http://cloud.github.com/downloads/flavio%0A/rockmarble/rockmarble.ymp"><img src="/images/rockmarble/rockmarble_1click.png" alt="" /></a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2009/04/02/rockmarble-follow-artists-tours-with-marble/">Rockmarble: How to Follow Your Favourite Artists Tour With Marble</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2009-04-02T08:51:43+02:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2009</time>
        
         | <a href="/2009/04/02/rockmarble-follow-artists-tours-with-marble/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last weekend I wanted to have some fun with
<a href="http://qjson.sourceforge.net/">QJson</a>. So I came out with this idea: retrieve
from <a href="http://www.last.fm/home">last.fm</a> the tour dates of my favourite artists
and display the locations using <a href="http://edu.kde.org/marble/">Marble</a>.</p>

<p>After some hacking I created this small application: <em>rockmarble</em>&#8230;</p>

<p><img src="/images/rockmarble/flow.png"></p>

<p>If you have a last.fm account rockmarble will import your favourite artist
list. Otherwise you can add one artists at a time.</p>

<p>The tour location will be displayed inside Marble, using
<a href="http://www.openstreetmap.org/">openstreetmap</a>.</p>

<h2>Requirements</h2>

<p>In order to build/run it you will need:</p>

<ul>
<li><a href="http://www.qtsoftware.com/downloads">Qt4</a></li>
<li><a href="http://edu.kde.org/marble/">marble</a></li>
<li><a href="http://qjson.sourceforge.net/">QJson</a></li>
</ul>


<h2>Installation</h2>

<p>You can grab the source code of rockmarble
<a href="http://github.com/flavio/rockmarble/tree/master">here</a>.</p>

<p>If you are an openSUSE user you can use 1click install:</p>

<p><a href="http://cloud.github.com/downloads/flavio%0A/rockmarble/rockmarble.ymp"><img src="/images/rockmarble/rockmarble_1click.png" alt="" /></a></p>

<h2>Issues</h2>

<h3>Geolocalization</h3>

<p>The geolocalization data are given by last.fm, so if you discover that
Metallica are going to give a concert in the middle of the Pacific Ocean
please don’t bother me :)</p>

<h3>Special names</h3>

<p>It seems that QJson doesn’t handle properly special characters. Maybe you will
some artist with a blank name. I’m going to fix this issue asap.</p>

<h2>More details</h2>

<p>Visit <a href="http://rockmarble.sourceforge.net">rockmarble website</a></p>

<h2>Future</h2>

<p>Who wants to integrate it into amarok&#8217;s context view? ;)</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/11/04/qjson_qt_json_library/">QJson: A Qt-based Library for Mapping JSON Data to QVariant Objects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-11-04T13:37:07+01:00" pubdate data-updated="true">Nov 4<span>th</span>, 2008</time>
        
         | <a href="/2008/11/04/qjson_qt_json_library/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In order to realize a project of mine I started looking for a Qt library for
mapping JSON data to Qt objects.</p>

<p>I came over a couple of solutions but none of them made me happy. So in the
last weekend I wrote my own library : <strong>QJson</strong> The library is based on Qt
toolkit and converts JSON data to <em>QVariant</em> instances. JSON arrays will be
mapped to <em>QVariantList</em> instances, while JSON&#8217;s objects will be mapped to
<em>QVariantMap</em>. The JSON parser is generated with Bison, while the scanner has
been coded by me.</p>

<h3>Usage</h3>

<p>Converting JSON&#8217;s data to <em>QVariant</em> instance is really simple:</p>

<figure class='code'><figcaption><span>[] [] </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="c1">// create a JSonDriver instance</span>
</span><span class='line'><span class="n">JSonDriver</span> <span class="n">driver</span><span class="p">;</span>
</span><span class='line'><span class="kt">bool</span> <span class="n">ok</span><span class="p">;</span>
</span><span class='line'><span class="c1">// json is a QString containing the data to convert</span>
</span><span class='line'><span class="n">QVariant</span> <span class="n">result</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">parse</span> <span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ok</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Suppose you&#8217;re going to convert this JSON data:</p>

<figure class='code'><figcaption><span>[JSON data] [] </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span> <span class="nt">&quot;encoding&quot;</span> <span class="p">:</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span> <span class="nt">&quot;plug-ins&quot;</span> <span class="p">:</span> <span class="p">[</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="s2">&quot;c++&quot;</span><span class="p">,</span> <span class="s2">&quot;ruby&quot;</span> <span class="p">],</span>
</span><span class='line'>  <span class="nt">&quot;indent&quot;</span> <span class="p">:</span> <span class="p">{</span> <span class="nt">&quot;length&quot;</span> <span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nt">&quot;use_space&quot;</span> <span class="p">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The following code would convert the JSON data and parse it:</p>

<figure class='code'><figcaption><span>[] [] </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='cpp'><span class='line'><span class="n">JSonDriver</span> <span class="n">driver</span><span class="p">;</span>
</span><span class='line'><span class="kt">bool</span> <span class="n">ok</span><span class="p">;</span>
</span><span class='line'><span class="n">QVariantMap</span> <span class="n">result</span> <span class="o">=</span> <span class="n">driver</span><span class="p">.</span><span class="n">parse</span> <span class="p">(</span><span class="n">json</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ok</span><span class="p">).</span><span class="n">toMap</span><span class="p">();</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ok</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">qFatal</span><span class="p">(</span><span class="s">&quot;An error occured during parsing&quot;</span><span class="p">);</span>
</span><span class='line'>  <span class="n">exit</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;encoding:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">result</span><span class="p">[</span><span class="s">&quot;encoding&quot;</span><span class="p">].</span><span class="n">toString</span><span class="p">();</span>
</span><span class='line'><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;plugins:&quot;</span><span class="p">;</span>
</span><span class='line'><span class="n">foreach</span> <span class="p">(</span><span class="n">QVariant</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">result</span><span class="p">[</span><span class="s">&quot;plug-ins&quot;</span><span class="p">].</span><span class="n">toList</span><span class="p">())</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;</span><span class="se">\t</span><span class="s">-&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">plugin</span><span class="p">.</span><span class="n">toString</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="n">QVariantMap</span> <span class="n">nestedMap</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s">&quot;indent&quot;</span><span class="p">].</span><span class="n">toMap</span><span class="p">();</span>
</span><span class='line'><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;length:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">nestedMap</span><span class="p">[</span><span class="s">&quot;length&quot;</span><span class="p">].</span><span class="n">toInt</span><span class="p">();</span>
</span><span class='line'><span class="n">qDebug</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;use_space:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">nestedMap</span><span class="p">[</span><span class="s">&quot;use_space&quot;</span><span class="p">].</span><span class="n">toBool</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>The output would be:</p>

<pre><code>encoding: "UTF-8" plugins: - "python" - "c++" - "ruby" length: 3 use_space: true
</code></pre>

<h3>Requirements</h3>

<p>QJson requires:</p>

<ul>
<li>cmake</li>
<li>Qt</li>
</ul>


<h3>Obtain the source</h3>

<p>Actually QJson code is hosted on KDE subversion repository. You can download
it using a svn client:</p>

<blockquote><p>svn co svn://anonsvn.kde.org/home/kde/trunk/playground/libs/qjson</p></blockquote>

<p>For more informations visit <a href="http://qjson.sourceforge.net">QJson site</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/10/03/ruby-downloader-for-jamendo/">Ruby Downloader for Jamendo</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-10-03T11:28:28+02:00" pubdate data-updated="true">Oct 3<span>rd</span>, 2008</time>
        
         | <a href="/2008/10/03/ruby-downloader-for-jamendo/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Also this year I&#8217;ll attend the Linux day (a day dedicated to Gnu/Linux  and
FLOSS that occurs every year in Italy) organized by my <a href="http://bglug.it">LUG</a>.
Guess what I&#8217;ll be talking about&#8230; ;)</p>

<p>While organizing the event somebody proposed to setup a local server with some
music released under CC license. He suggested to download some albums from
<a href="http://www.jamendo.com">Jamendo</a> (due to network issues we won&#8217;t be able to
provide direct access to the website).</p>

<p>Since nobody wanted to download the albums by hand, last night I wrote a small
ruby program that does the dirty job.</p>

<h3>Requirements:</h3>

<p>Ruby and json gem have to be installed on you machine.</p>

<h3>Usage:</h3>

<p>Help:<a href="http://www.flavio.castelli.name/wp-%0Acontent/uploads/2008/10/jamendo_downloader.rb"></a></p>

<p>   ./jamendo_downloader.rb &#8211;help</p>

<p>Download the top 10 rock albums:</p>

<p>  ./jamendo_downloader.rb -g rock -t 10</p>

<h3>Have fun</h3>

<p>I think there&#8217;s nothing more to say&#8230; enjoy it!</p>

<div><script src='https://gist.github.com/2437530.js?file=jamendo_downloader.rb'></script>
<noscript><pre><code>#!/usr/bin/ruby

require 'rubygems'
require 'open-uri'
require 'json'
require 'ftools'
require 'cgi'
require 'optparse'

@download_dir = nil
@genre = nil
@top_num = nil
# move cursor to beginning of line
cr = &quot;\r&quot;
cwd = Dir.getwd
# ANSI escape code to clear line from cursor to end of line
# &quot;\e&quot; is an alternative to &quot;\033&quot;
# cf. http://en.wikipedia.org/wiki/ANSI_escape_code
clear = &quot;\e[0K&quot;

# reset lines
@reset = cr + clear

# if possible restore downloaded album_id array
begin
    @downloaded = JSON.parse(File.new('downloaded.json').read.gsub(/\t|\r/,''))
rescue
    @downloaded = []
end

# Add colorizing functionalities to String #####################################

class String
    def red; colorize(self, &quot;\e[1m\e[31m&quot;); end
    def green; colorize(self, &quot;\e[1m\e[32m&quot;); end
    def dark_green; colorize(self, &quot;\e[32m&quot;); end
    def yellow; colorize(self, &quot;\e[1m\e[33m&quot;); end
    def dark_yellow; colorize(self, &quot;\e[33m&quot;); end
    def blue; colorize(self, &quot;\e[1m\e[34m&quot;); end
    def dark_blue; colorize(self, &quot;\e[34m&quot;); end
    def pur; colorize(self, &quot;\e[1m\e[35m&quot;); end
    def colorize(text, color_code)  &quot;#{color_code}#{text}\e[0m&quot; end
end

################################################################################

# Functions ####################################################################

def download(genre,album,tracks_url)
    artist_name = album['artist_name']
    album_name  = album['name']
    album_id    = album['id']

    local_download_path = File.expand_path &quot;#{@download_dir}/#{genre}/#{artist_name}/#{album_name}&quot;
    File.makedirs local_download_path
    Dir.chdir local_download_path

    print &quot;\n\n&quot;
    puts &quot;Going to download of \&quot;#{album_name}\&quot; by \&quot;#{artist_name}\&quot; finished&quot;.dark_blue
    counter = 1
    tracks_url.each do |url|
      print &quot;#{@reset}downloading #{counter}/#{tracks_url.size}&quot;
      $stdout.flush

      open(CGI.unescape(url.split(/\?/).first.split(/\//).last),&quot;wb&quot;).write(open(url).read)
      counter +=1
    end

    @downloaded &lt;&lt; album_id
    
    puts &quot;\nDownload finished&quot;.green
end

################################################################################

# parse command line options ###################################################

opt = OptionParser.new
opt.banner = &quot;Usage: run_tests [options]&quot;

opt.on( &quot;-h&quot;, &quot;--help&quot;, &quot;Print this message&quot; ) do
  puts opt
  exit
end

opt.on( &quot;-g&quot;, &quot;--genre&quot;, &quot;=GENRE_NAME&quot;, &quot;download music of the specified genre&quot; ) do |val|
  @genre = val
end

opt.on( &quot;-d&quot;, &quot;--download_dir&quot;, &quot;=DONWLOAD_DIR&quot;, &quot;place where the music files will be downloaded&quot; ) do |val|
  @download_dir = val
end

opt.on( &quot;-t&quot;, &quot;=TOP_NUM&quot;, &quot;download only TOP_NUM album of the specified genre &quot; ) do |val|
  @top_num = val
end

begin
  opt.parse!( ARGV )
rescue OptionParser::InvalidOption
  puts $!
  puts opt
  exit
end

if ARGV.size &gt; 0
  puts &quot;Too many arguments&quot;
  puts opt
  exit
end

if @genre.nil?
  puts 'You have to specify the genre'
  puts opt
  exit 1
end

if @top_num.nil?
  puts 'You have to specify the top num param'
  puts opt
  exit 1
end

if @download_dir.nil?
  @download_dir = &quot;#{Dir.pwd}/downloaded_files&quot;
  puts 'You have not specified the download dir'
  puts &quot;Files will be download inside #{@download_dir}&quot;
end

################################################################################

query_url = &quot;http://api.jamendo.com/get2/id+name+artist_name/album/jsonpretty/?tag_idstr=#{@genre}&amp;n=#{@top_num}&amp;order=rating_desc&quot;
query_url += &quot;&amp;idexclude=#{@downloaded.join('+')}&quot; unless @downloaded.empty?

JSON.parse(open(query_url).read.gsub(/\t|\r/,'')).each do |album|
  album_download_urls = &quot;http://www.jamendo.com/get/track/id/album/audio/plain/#{album['id']}/&quot;
  
  tracks_url = []
  open(album_download_urls).each do |track_url|
    tracks_url &lt;&lt; track_url.chomp
  end

  download(@genre, album, tracks_url)
end

Dir.chdir cwd
open('downloaded.json','w') { |f| f &lt;&lt; @downloaded.to_json }
</code></pre></noscript></div>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2008/07/16/can-dreams-became-true/">Can Dreams Became True?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2008-07-16T13:57:52+02:00" pubdate data-updated="true">Jul 16<span>th</span>, 2008</time>
        
         | <a href="/2008/07/16/can-dreams-became-true/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the last years of university I spent some time wondering about my
future job. After the degree I received  lot of offers (fortunately also good
ones), but none of them matched with my <em>&#8220;dream job&#8221;</em> . There was always
something missing/different. I was just trying to convince myself that the
<em>&#8220;perfect job&#8221;</em> can exist only in our dreams when my feed reader pointed me
<a href="http://www.kdedevelopers.org/node/3484">here</a>.</p>

<p>After reading these lines:</p>

<blockquote><p>&#8221; We are exploring new technologies, creating prototypes of future systems,
and trying to find and shape some of the features that will be part of
upcoming SUSE products and the ecosystem around that. It&#8217;s a fascinating job,
challenging, fun, and always exciting. For somebody like me who loves to
create new things and enjoys working with an awesome team of innovative people
this is a dream job.&#8221;</p></blockquote>

<p>I realized the description matched with all my wishes!</p>

<p>I immediately applied for the position and now, after more than a month, I&#8217;m
looking at a signed proposal.</p>

<p>I&#8217;ve waited a long time before spreading my joy to the rest of the world&#8230;
but now I just want to say that starting from 1st August I&#8217;ll be part of
Suse&#8217;s Incubation team! :D</p>

<p>I&#8217;m really happy, excited and honoured for this awesome opportunity.</p>

<p><strong>I wish you&#8217;ll be able to realize your dreams too!</strong><br/>
Just a funny note&#8230; While Cornelius was writing about the job offer on his
blog, I was having a dinner with another Novell employee:
<a href="http://primates.ximian.com/~massi/blog/">Massimiliano Mantione</a>. I was
listening to his personal story, wishing to find a dream job like his one.
I have to admit I was a bit jealous :)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2012/11/21/qjson-0-dot-8-0-released/">QJson 0.8.0 released</a>
      </li>
    
      <li class="post">
        <a href="/2011/03/29/introducing-dister-a-heroku-like-solution-for-suse-studio/">Introducing dister, a Heroku like solution for SUSE Studio</a>
      </li>
    
      <li class="post">
        <a href="/2010/08/11/jump/">Jump: a bookmarking system for the bash shell</a>
      </li>
    
      <li class="post">
        <a href="/2010/07/23/fast-user-switch-plasmoid-improvements/">Fast user switch plasmoid improvements</a>
      </li>
    
      <li class="post">
        <a href="/2010/07/15/fast-user-switch-plasmoid/">Fast user switch plasmoid</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/flavio">@flavio</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'flavio',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("flavio_castelli", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/flavio_castelli" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @flavio_castelli</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Flavio Castelli -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'flavio-castelli-name';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
